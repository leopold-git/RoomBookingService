<!DOCTYPE html>
<html>
<head>
	<title>Database</title>
	<meta charset="utf-8">
</head>
<body>
	<style>

	body {background-color: white;}

	html {
		font-family: sans-serif;
	}

	table {
		border-collapse: collapse;
		border: 2px solid rgb(200,200,200);
		letter-spacing: 1px;
		font-size: 0.8rem;
	}

	td, th {
		border: 1px solid rgb(190,190,190);
		padding: 10px 20px;
	}

	th {
		background-color: rgb(235,235,235);
	}

	td {
		text-align: center;
	}

	tr:nth-child(even) td {
		background-color: rgb(250,250,250);
	}

	tr:nth-child(odd) td {
		background-color: rgb(245,245,245);
	}

	caption {
		padding: 10px;
	}
	.btn-group button {
		background-color: #6495ED; 
		border: 1px #00008B; 
		color: white; /* White text */
		padding: 10px 24px; /* Some padding */
		cursor: pointer; /* Pointer/hand icon */
		float: left; /* Float the buttons side by side */
	}

	.btn-group button:not(:last-child) {
		border-right: none; /* Prevent double borders */
	}

	/* Clear floats (clearfix hack) */
	.btn-group:after {
		content: "";
		clear: both;
		display: table;
	}

	/* Add a background color on hover */
	.btn-group button:hover {
		background-color: #0E0973;
	}

	#pastTable {
		display: none;
	}
	#courseTable {
		display: none;
	}	
	#clubTable {
		display: none;
	}
	#advancedEvent {
		display: none;
	}
	#advancedCourse {
		display: none;
	}
	#queryTable {
		display: none;
	}
	.column {
		float: left;
		width: 50%;
		padding: 10px;
		height: 300px; 
	}

	.row:after {
		content: "";
		display: table;
		clear: both;
	}
	#delete{
		float: left;
		width: 50%;
		padding: 10px;
		height: 300px; 
	}
</style>


<div class="row">


	<div class="column">

		<h1>Information Page</h1>
		<h2>Retrieve information about events, courses, etc.</h2>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

		<div class="btn-group">
			<button type="button" onclick="showPast(); toggle1()">Past Events</button>
			<button type="button" onclick="showClubs(); toggle2()">Club List</button> 
			<button type="button" onclick="showCourse(); toggle3()">Course List</button>
			<button type="button" onclick="sampleQuery(); toggle6()">Most Popular Events</button>

		</div>


		<!--  <input type="text" id="searchbar" name="searchbar" placeholder="Type an Event Name">. -->

		<!--<button type="button" onclick="sampleQuery()">Run Query</button>  -->

								<!--	<table id="queryTable" display="hide">
									<CAPTION ALIGN="top">Find number of club members attending each event.</CAPTION>
										<thead>
									    	<tr>
									        	<th>event_name</th><th>supplier</th><th>room_no</th>
									        </tr>
									    </thead>
									    	<tbody>
									        </tbody>
									</table>
									
									
								-->
									<table id="pastTable" >
										<CAPTION ALIGN="top">Past Events: </CAPTION>
										<thead>
											<tr id="header" display="none">
												<th>event_name</th><th>club_name</th><th>date</th><th>e_start_time</th><th>e_end_time</th><th>building_name</th><th>room_no</th>

											</tr>
										</thead>
										<tbody>
										</tbody>
									</table>
								<table id="clubTable" >
									<CAPTION ALIGN="top">List of Clubs: </CAPTION>
									<thead>
										<tr id="header" display="none">
											<th>club_name</th><th>club_category</th><th>advisor</th>

										</tr>
									</thead>
									<tbody>
									</tbody>
								</table>

								<table id="courseTable" >
									<CAPTION ALIGN="top">List of Courses: </CAPTION>
									<thead>
										<tr id="header" display="none">
											<th>crn</th><th>c_name</th><th>c_start_time</th><th>c_end_time</th><th>daysAvail</th><th>building_name</th><th>room_no</th>
										</tr>
									</thead>
									<tbody>
									</tbody>
								</table>

								<table id="advancedEvent" >
									<CAPTION ALIGN="top">Event Search Results</CAPTION>
									<thead>
										<tr id="header" display="none">
											<th>event_name</th><th>e_start_time</th><th>e_end_time</th><th>supplier</th><th>building_name</th><th>room_no</th><th>club_name</th>
										</tr>
									</thead>
									<tbody>
									</tbody>
								</table>

								<table id="queryTable">
									<CAPTION ALIGN="top">Find number of club members attending each event.</CAPTION>
									<thead>
				    				<tr id="header" display="none">
				        				<th>event_name</th><th>attending</th>
				        			</tr>
				   			 </thead>
				    		<tbody>
				        	</tbody>
								</table>

					
					</div>
							

					<div align="right">
													
						<div class="reserve-form">
						    <form>
								<div class="form-header">
									<h2>Advanced Search for Events</h2>
									<p>Enter event information below.</p>
								</div>
						        <div class="form-group">
									<label>Date (YYYY-MM-DD):</label>
						        	<input type="text" id="date" class="form-control" name="date" required="required">
						        </div>
								<div class="form-group">
									<label>Club Name:</label>
						            <input type="text" id="club_name" class="form-control" name="club_name" required="required">
						        </div>
								<div class="form-group">
									<label>Building Name: </label>
						            <input type="text" id="building_name" class="form-control" name="building_name" required="required">
						        </div>
								<div class="form-group">
									<label>Room Number:</label>
						            <input type="text" id="room_no" class="form-control" name="room_no" required="required">
						        </div>


								<div class="form-group">
									<button type="button" onclick="advancedEventSearch(); toggle4()" class="btn btn-primary btn-block btn-lg">Submit Reservation</button>
								</div>	
						    </form>
						</div> 
										<button onclick="toggle4()">Hide/Show Event Results</button>
										<button id="sendtonext">Or Go To Advanced Course Page</button>

									
						</div>
		       
								
									

								
						
						</div>



						<!--  new search bar for room number search  -->




						<script>
							function showCourse(){

	       	//document.getElementById("queryTable").style.display="block";
	       	$.ajax({	
				type: 'GET',						//get data from server to the client
				url: 'http://localhost/showCourse',	//want to get info from here, it's in a JSONObject
			})
	       	.done(function(data) {
			console.log(JSON.stringify(data));		//shows the data in the developer tools

			var tbody = $('#courseTable tbody');
			props = ["crn", "c_name", "c_start_time", "c_end_time", "daysAvail", "building_name", "room_no"];

			$.each(data, function(i, data) {
				var tr = $('<tr>');
				$.each(props, function(i, prop) {
					$('<td>').html(data[prop]).appendTo(tr);  
				});
				tbody.append(tr);
			});		

		})
	       	.fail(function(data) {
	       		alert("Failed to load data.");
	       	});
	       }

	       function toggle3(){
	       	var x = document.getElementById("courseTable");
	       	if (x.style.display === "block") {
	       		x.style.display = "none";
	       	} else {
	       		x.style.display = "block";
    			//document.getElementById("tableDiv").style.display = "block";

    		}
    	}

    </script>

    <script>
    	function showPast(){
    		$.ajax({	
				type: 'GET',						//get data from server to the client
				url: 'http://localhost/showPastEvents',	//want to get info from here, it's in a JSONObject
			})
    		.done(function(data) {
			//document.getElementById("upcomingTable").style.display="block";
			console.log(JSON.stringify(data));		//shows the data in the developer tools

			var tbody = $('#pastTable tbody'),
			// props = ["event_name", "attending"];
			props = ["event_name", "club_name", "date", "e_start_time", "e_end_time", "building_name", "room_no"];
			$.each(data, function(i, data) {
				var tr = $('<tr>');
				$.each(props, function(i, prop) {
					$('<td>').html(data[prop]).appendTo(tr);  
				});
				tbody.append(tr);
			});		

		})
    		.fail(function(data) {
    			alert("Failed to load data.");
    		});


    	}

    	function toggle1(){
    		var x = document.getElementById("pastTable");
    		if (x.style.display === "block") {
    			x.style.display = "none";
    		} else {
    			x.style.display = "block";
    			//document.getElementById("tableDiv").style.display = "block";

    		}
    	}
    </script>
    <script>
    	function showClubs(){
    		$.ajax({	
				type: 'GET',						//get data from server to the client
				url: 'http://localhost/showClub',	//want to get info from here, it's in a JSONObject
			})
    		.done(function(data) {
			//document.getElementById("upcomingTable").style.display="block";
			console.log(JSON.stringify(data));		//shows the data in the developer tools

			var tbody = $('#clubTable tbody'),
			// props = ["event_name", "attending"];
			props = ["club_name", "club_category", "advisor"];
			$.each(data, function(i, data) {
				var tr = $('<tr>');
				$.each(props, function(i, prop) {
					$('<td>').html(data[prop]).appendTo(tr);  
				});
				tbody.append(tr);
			});		

		})
    		.fail(function(data) {
    			alert("Failed to load data.");
    		});


    	}

    	function toggle2(){
    		var x = document.getElementById("clubTable");
    		if (x.style.display === "block") {
    			x.style.display = "none";
    		} else {
    			x.style.display = "block";
    			//document.getElementById("tableDiv").style.display = "block";

    		}
    	}
    </script>


    <script>
    	function advancedEventSearch(){

    		var obj = {}
		    	obj.date=document.getElementById('date').value
				obj.club_name=document.getElementById('club_name').value
				obj.building_name=document.getElementById('building_name').value
				obj.room_no=document.getElementById('room_no').value
    		$.ajax({	
				type: 'POST',						//get data from server to the client
				url: 'http://localhost/advancedEventSearch',
	            data: JSON.stringify(obj),
	            contentType: "application/json"	//want to get info from here, it's in a JSONObject
			})
    		.done(function(data) {
			//document.getElementById("upcomingTable").style.display="block";
			console.log(JSON.stringify(data));		//shows the data in the developer tools

			var tbody = $('#advancedEvent tbody'),
			// props = ["event_name", "attending"];
			props = ["event_name", "e_start_time", "e_end_time", "supplier", "building_name", "room_no", "club_name"];
			$.each(data, function(i, data) {
				var tr = $('<tr>');
				$.each(props, function(i, prop) {
					$('<td>').html(data[prop]).appendTo(tr);  
				});
				tbody.append(tr);
			});		

		})
    		.fail(function(data) {
    			alert("Failed to load data.");
    		});
    	}

    	  function toggle4(){
	       	var x = document.getElementById("advancedEvent");
	       	if (x.style.display === "block") {
	       		x.style.display = "none";
	       	} else {
	       		x.style.display = "block";
    			//document.getElementById("tableDiv").style.display = "block";

    		}
    	}


			document.getElementById("sendtonext").onclick = function () {
					location.href = "http://localhost/courseTester.html";
			};
    </script>

    	<script>

		function sampleQuery(){
			$.ajax({	
				type: 'GET',						//get data from server to the client
				url: 'http://localhost/loadDB',	//want to get info from here, it's in a JSONObject
			})
			.done(function(data) {
			document.getElementById("queryTable").style.display="block";
			console.log(JSON.stringify(data));		//shows the data in the developer tools
	
			var tbody = $('#queryTable tbody'),
			// props = ["event_name", "attending"];
			  props = ["event_name", "attending"];
			$.each(data, function(i, data) {
			  var tr = $('<tr>');
			  $.each(props, function(i, prop) {
			    $('<td>').html(data[prop]).appendTo(tr);  
			  });
			  tbody.append(tr);
			});		

			})
			.fail(function(data) {
	            alert("Failed to load data.");
	        });
		}

		function toggle6() {
	       	var x = document.getElementById("queryTable");
	       	if (x.style.display === "block") {
	       		x.style.display = "none";
	       	} else {
	       		x.style.display = "block";
    			//document.getElementById("tableDiv").style.display = "block";

    		}
    	}
	</script>
  




</body>
</html>
